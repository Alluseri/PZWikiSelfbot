var MD5=function(e){return M(V(Y(X(e),8*e.length))).toLowerCase()};function M(e){for(var t,i="0123456789ABCDEF",a="",n=0;n<e.length;n++)t=e.charCodeAt(n),a+=i.charAt(t>>>4&15)+i.charAt(15&t);return a}function X(e){for(var t=Array(e.length>>2),i=0;i<t.length;i++)t[i]=0;for(i=0;i<8*e.length;i+=8)t[i>>5]|=(255&e.charCodeAt(i/8))<<i%32;return t}function V(e){for(var t="",i=0;i<32*e.length;i+=8)t+=String.fromCharCode(e[i>>5]>>>i%32&255);return t}function Y(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var i=1732584193,a=-271733879,n=-1732584194,d=271733878,o=0;o<e.length;o+=16){var r=i,m=a,s=n,c=d;a=md5_ii(a=md5_ii(a=md5_ii(a=md5_ii(a=md5_hh(a=md5_hh(a=md5_hh(a=md5_hh(a=md5_gg(a=md5_gg(a=md5_gg(a=md5_gg(a=md5_ff(a=md5_ff(a=md5_ff(a=md5_ff(a,n=md5_ff(n,d=md5_ff(d,i=md5_ff(i,a,n,d,e[o+0],7,-680876936),a,n,e[o+1],12,-389564586),i,a,e[o+2],17,606105819),d,i,e[o+3],22,-1044525330),n=md5_ff(n,d=md5_ff(d,i=md5_ff(i,a,n,d,e[o+4],7,-176418897),a,n,e[o+5],12,1200080426),i,a,e[o+6],17,-1473231341),d,i,e[o+7],22,-45705983),n=md5_ff(n,d=md5_ff(d,i=md5_ff(i,a,n,d,e[o+8],7,1770035416),a,n,e[o+9],12,-1958414417),i,a,e[o+10],17,-42063),d,i,e[o+11],22,-1990404162),n=md5_ff(n,d=md5_ff(d,i=md5_ff(i,a,n,d,e[o+12],7,1804603682),a,n,e[o+13],12,-40341101),i,a,e[o+14],17,-1502002290),d,i,e[o+15],22,1236535329),n=md5_gg(n,d=md5_gg(d,i=md5_gg(i,a,n,d,e[o+1],5,-165796510),a,n,e[o+6],9,-1069501632),i,a,e[o+11],14,643717713),d,i,e[o+0],20,-373897302),n=md5_gg(n,d=md5_gg(d,i=md5_gg(i,a,n,d,e[o+5],5,-701558691),a,n,e[o+10],9,38016083),i,a,e[o+15],14,-660478335),d,i,e[o+4],20,-405537848),n=md5_gg(n,d=md5_gg(d,i=md5_gg(i,a,n,d,e[o+9],5,568446438),a,n,e[o+14],9,-1019803690),i,a,e[o+3],14,-187363961),d,i,e[o+8],20,1163531501),n=md5_gg(n,d=md5_gg(d,i=md5_gg(i,a,n,d,e[o+13],5,-1444681467),a,n,e[o+2],9,-51403784),i,a,e[o+7],14,1735328473),d,i,e[o+12],20,-1926607734),n=md5_hh(n,d=md5_hh(d,i=md5_hh(i,a,n,d,e[o+5],4,-378558),a,n,e[o+8],11,-2022574463),i,a,e[o+11],16,1839030562),d,i,e[o+14],23,-35309556),n=md5_hh(n,d=md5_hh(d,i=md5_hh(i,a,n,d,e[o+1],4,-1530992060),a,n,e[o+4],11,1272893353),i,a,e[o+7],16,-155497632),d,i,e[o+10],23,-1094730640),n=md5_hh(n,d=md5_hh(d,i=md5_hh(i,a,n,d,e[o+13],4,681279174),a,n,e[o+0],11,-358537222),i,a,e[o+3],16,-722521979),d,i,e[o+6],23,76029189),n=md5_hh(n,d=md5_hh(d,i=md5_hh(i,a,n,d,e[o+9],4,-640364487),a,n,e[o+12],11,-421815835),i,a,e[o+15],16,530742520),d,i,e[o+2],23,-995338651),n=md5_ii(n,d=md5_ii(d,i=md5_ii(i,a,n,d,e[o+0],6,-198630844),a,n,e[o+7],10,1126891415),i,a,e[o+14],15,-1416354905),d,i,e[o+5],21,-57434055),n=md5_ii(n,d=md5_ii(d,i=md5_ii(i,a,n,d,e[o+12],6,1700485571),a,n,e[o+3],10,-1894986606),i,a,e[o+10],15,-1051523),d,i,e[o+1],21,-2054922799),n=md5_ii(n,d=md5_ii(d,i=md5_ii(i,a,n,d,e[o+8],6,1873313359),a,n,e[o+15],10,-30611744),i,a,e[o+6],15,-1560198380),d,i,e[o+13],21,1309151649),n=md5_ii(n,d=md5_ii(d,i=md5_ii(i,a,n,d,e[o+4],6,-145523070),a,n,e[o+11],10,-1120210379),i,a,e[o+2],15,718787259),d,i,e[o+9],21,-343485551),i=safe_add(i,r),a=safe_add(a,m),n=safe_add(n,s),d=safe_add(d,c)}return Array(i,a,n,d)}function md5_cmn(e,t,i,a,n,d){return safe_add(bit_rol(safe_add(safe_add(t,e),safe_add(a,d)),n),i)}function md5_ff(e,t,i,a,n,d,o){return md5_cmn(t&i|~t&a,e,t,n,d,o)}function md5_gg(e,t,i,a,n,d,o){return md5_cmn(t&a|i&~a,e,t,n,d,o)}function md5_hh(e,t,i,a,n,d,o){return md5_cmn(t^i^a,e,t,n,d,o)}function md5_ii(e,t,i,a,n,d,o){return md5_cmn(i^(t|~a),e,t,n,d,o)}function safe_add(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function bit_rol(e,t){return e<<t|e>>>32-t}function convertDate(e){function t(e,t){for(;e.length<t;)e="0"+e;return e}return e.getUTCFullYear().toString()+t((e.getUTCMonth()+1).toString(),2)+t(e.getUTCDate().toString(),2)+t(e.getUTCHours().toString(),2)+t(e.getUTCMinutes().toString(),2)+t(e.getUTCSeconds().toString(),2)}function buildHeaders(e,t){return e.cookie=PZWIKI_COOKIE,e["user-agent"]="Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36 OPR/82.0.4227.50",e.accept=t?"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9":"application/json, text/javascript, */*; q=0.01",e["accept-encoding"]="gzip, deflate, br",e["accept-language"]="en-US,en;q=0.9",e.dnt="1",e["sec-ch-ua"]='"Chromium";v="96", "Opera GX";v="82", ";Not A Brand";v="99"',e["sec-ch-ua-mobile"]="?0",e["sec-ch-ua-platform"]="Windows",t?(e["sec-fetch-dest"]="document",e["sec-fetch-mode"]="navigate"):(e["sec-fetch-dest"]="empty",e["sec-fetch-mode"]="cors"),e["sec-fetch-site"]="same-origin",e["sec-fetch-user"]="?1",e["upgrade-insecure-requests"]="1",e}async function pushEditState(e){var t=await(await fetch("https://pzwiki.net/wiki/"+e,{method:"GET",credentials:"same-origin",headers:buildHeaders({},!0)})).text();console.log("[STEP/SUCCESS] Naturally opened wiki article, data will be parsed.");var i=await(await fetch("https://pzwiki.net/w/index.php?title="+e+"&action=edit",{method:"GET",credentials:"same-origin",headers:buildHeaders({referer:"https://pzwiki.net/wiki/"+e},!0)})).text();return console.log("[STEP/SUCCESS] Opened the edit page, data will be parsed."),[convertDate(new Date),t.match('"wgRevisionId":(.+?),')[1],i.match('id="editingStatsId" value="(.+?)"')[1]]}async function stashEdit(e,t,i,a){var n=await(await fetch("https://pzwiki.net/w/api.php",{method:"POST",credentials:"same-origin",body:Object.entries({action:"stashedit",format:"json",formatversion:"2",title:e,section:"",sectiontitle:"",summary:i,contentmodel:"wikitext",contentformat:"text/x-wiki",baserevid:a[1],text:t,token:PZWIKI_TOKEN}).map(e=>encodeURIComponent(e[0])+"="+encodeURIComponent(e[1])).join("&"),headers:buildHeaders({referer:"https://pzwiki.net/w/index.php?title="+e+"&action=submit","x-requested-with":"XMLHttpRequest","content-type":"application/x-www-form-urlencoded; charset=UTF-8"},!1)})).json();return n&&n.stashedit&&n.stashedit.texthash?(console.log("[STASH/SUCCESS] Successfully generated a stash hash!"),n.stashedit.texthash):(console.log("[STASH/FAILURE] Failed to generate a stash hash."),-1)}async function publish(e,t,i,a){var n=Number.parseInt(a[1]),d=new FormData;d.append("wpUnicodeCheck","‚Ñ≥ùí≤‚ô•ùìäùìÉùíæùí∏‚Ñ¥ùíπ‚ÑØ"),d.append("wpAntispam",""),d.append("editingStatsId",a[2]),d.append("wpSection",""),d.append("wpStarttime",a[0]),d.append("wpEdittime",convertDate(new Date)),d.append("editRevId",n+2),d.append("wpScrolltop","0"),d.append("wpAutoSummary",MD5(i)),d.append("oldid",0),d.append("parentRevId",n+2),d.append("format","text/x-wiki"),d.append("model","wikitext"),d.append("wpTextbox1",t),d.append("wpSummary",i),d.append("wpWatchthis",""),d.append("wpSave","Save changes"),d.append("wpEditToken",PZWIKI_TOKEN),d.append("mode","text"),d.append("wpUltimateParam","1"),await fetch("https://pzwiki.net/w/index.php?title="+e+"&action=submit",{method:"POST",credentials:"same-origin",body:d,headers:buildHeaders({referer:"https://pzwiki.net/w/index.php?title="+e+"&action=edit","cache-control":"max-age=0"},!0)})}async function fullEditCycle(e,t,i,a){try{console.log("0/3 Pushing edit state");var n=await pushEditState(e);console.log("1/3 Taking time"),setTimeout(async()=>{console.log("2/3 Dropping stash edit"),await stashEdit(e,t,i,n),console.log("3/3 Publishing"),await publish(e,t,i,n),console.log("—Ñ—Ä–µ—à—Ö–∞–∫ –∑–∞–±—É—Å—Ç–∏–ª")},a)}catch(e){console.log("—Ñ—Ä–µ—à—Ö–∞–∫ –Ω–µ –∑–∞–±—É—Å—Ç–∏–ª"),console.log(e)}}var PZWIKI_TOKEN=mw.user.tokens.values.editToken,PZWIKI_COOKIE=document.cookie;
